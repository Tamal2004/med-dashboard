import React from 'react';

import { TesterApplication } from './TesterApplicationForm';
import { AuthPiece } from 'aws-amplify-react';

import { PublicTesterFormContainer } from 'views/Containers';
import { UnsubscribeUser } from '../Account';
import { history } from 'libs/history';

class TesterForm extends AuthPiece {
    constructor(props) {
        super(props);
        this._validAuthStates = ['signUp'];
        this.gotoSignIn = this.gotoSignIn.bind(this);
        this.gotoSignUp = this.gotoSignUp.bind(this);
    }

    gotoSignIn = () => this.props.onStateChange('signIn', {});

    gotoSignUp = () => this.props.onStateChange('signUp', {});

    showComponent(theme) {
        return (
            <PublicTesterFormContainer
                gotoSignIn={this.gotoSignIn}
                gotoSignUp={this.gotoSignUp}
            >
                {history.location.pathname === '/unsubscribe' ? (
                    <UnsubscribeUser gotoSignIn={this.gotoSignIn} />
                ) : (
                    <TesterApplication noauth />
                )}
            </PublicTesterFormContainer>
        );
    }
}

export { TesterForm as default, TesterForm as OpenTesterForm };
